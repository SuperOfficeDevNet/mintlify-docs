---
uid: ws-create-custom-field
title: How to create a user-defined field
description: Describes how to create a user-defined field using web services
keywords: udef, user-defined field, custom field
author: AnthonyYates
date: 03.11.2022
content_type: howto
audience: api
audience_tooltip: SuperOffice APIs and database
redirect_from:
  - /en/custom-objects/udef/howto/services/rest-create-udef-field
  - /en/api/netserver/web-services/howto/custom-objects/rest-create-udef-field
---

import HowToGuideStepsIntro from "./includes/how-to-guide-steps-intro.md";

# How to create a user-defined field using the web services API

This guide describes how to create a user-defined field using the web services API.

<Note>
To show a user-defined field in the client, it must first be published.
</Note>

## Steps

<HowToGuideStepsIntro />

All examples depend on the [udefFieldType][1] enum type to define what the data type of the user-defined field should be.

### Create user-defined field of type Number

These examples demonstrate how to create a Number user-defined field. First, a request is sent to obtain the default user-defined field structure, including calculated positioning in the client. Then field values are updated to reflect field text, tooltip, whether it should be indexed, or be mandatory.

<Tabs>
<Tab title="RESTful REST API">
1. First get the JSON structure that represents a user-defined field. **This is a POST request.**

    Yes, it is unconventional to use a POST request to get an entity structure, however, this is specific to user-defined fields.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Contact/UdefLayout?udefFieldType=Number HTTP/1.1
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```

1. Update the relevant fields. Change FieldLabel, ShortLabel to update what text is shown in the client.

    ```json
    \{
        ...,
        "FieldLabel": "My Number Udef",
        "IsMandatory": true,
        "ShortLabel": "NumUdef",
        "Tooltip": "Tooltip for this Number UD field"
        ...,
    \}
    ```

1. Save the user-defined field. **This is a PUT request**.

    Yes, it is unconventional to use a PUT request to save, however, this is specific to user-defined fields.

    The PUT request accepts an array of user-defined fields, so more than one could be updated or saved at the same time. Existing user-defined fields not in the array will not be deleted.

    ```http
    PUT https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Contact/UdefLayout HTTP/1.1
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    Content-Type: application/json; charset=utf-8

    [\{
    "UDefFieldId": 0,
    "ColumnId": 8971,
    "FieldDefault": "",
    "FieldHeight": 17,
    "FieldLabel": "My Number Udef",
    "FieldLeft": 102,
    "FieldTop": 170,
    "FieldType": "Number",
    "FieldWidth": 100,
    "FormatMask": "",
    "HideLabel": false,
    "IsIndexed": false,
    "LabelHeight": 17,
    "LabelLeft": 0,
    "LabelTop": 170,
    "LabelWidth": 100,
    "LastVersionId": 0,
    "ListTableId": 136,
    "IsMandatory": true,
    "Type": "Contact",
    "Page1LineNo": 0,
    "ProgId": "SuperOffice:12",
    "IsReadOnly": false,
    "ShortLabel": "NumUdef",
    "TabOrder": 11,
    "TextLength": 0,
    "Tooltip": "Tooltip for this Number UD field",
    "UdefIdentity": 11,
    "UDListDefinitionId": 0,
    "Justification": "Left",
    "Version": 11,
    "TemplateVariableName": "cl11",
    "HasBeenPublished": false,
    "MdoListName": null
    \}]
    ```

    The response will contain all of the user-defined fields for this entity, but now the new user-defined field UDefFieldId property will contain a identity value.

1. Make sure the Contact user-defined fields are not currently being updated.

    ```http
    GET https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Contact/UdefLayout/Publish HTTP/1.1
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```

    Only if the response is False, proceed to publish and complete the delete operation.

1. Publish the user-defined field.

    <Warning>
    A Publish request creates a new version of all user-defined fields for the entity. Therefore, all user-defined fields will have updated UdefFieldId values.
    </Warning>

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Contact/UdefLayout/Publish HTTP/1.1
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```

1. Finally issue the RebuildUdefDeltas request to force the field to appear in the UI.

   Use the HTTP RPC Agent endpoint as there is no RESTful equivalent.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/Configuration/RebuildUdefDeltas
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```
</Tab>

<Tab title="HTTP RPC Agent API">
1. First get the JSON structure that represents a user-defined field. **This is a POST request.**

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/UserDefinedFieldInfo/CreateUserDefinedFieldInfo
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    Content-Type: application/json; charset=utf-8

    \{
        "OwnerType": "Contact",
        "FieldType": "Number",
    \}
    ```

    The response:

    ```json
    \{
        "UDefFieldId": 0,
        "ColumnId": 8972,
        "FieldDefault": "",
        "FieldHeight": 17,
        "FieldLabel": "",
        "FieldLeft": 102,
        "FieldTop": 187,
        "FieldType": "Number",
        "FieldWidth": 100,
        "FormatMask": "",
        "HideLabel": false,
        "IsIndexed": false,
        "LabelHeight": 17,
        "LabelLeft": 0,
        "LabelTop": 187,
        "LabelWidth": 100,
        "LastVersionId": 0,
        "ListTableId": 0,
        "IsMandatory": false,
        "Type": "Contact",
        "Page1LineNo": 0,
        "ProgId": "SuperOffice:12",
        "IsReadOnly": false,
        "ShortLabel": "",
        "TabOrder": 12,
        "TextLength": 0,
        "Tooltip": "",
        "UdefIdentity": 12,
        "UDListDefinitionId": 0,
        "Justification": "Left",
        "Version": 13,
        "TemplateVariableName": "cl12",
        "HasBeenPublished": false,
        "MdoListName": null,
        "TableRight": null,
        "FieldProperties": \{
            "IsIndexed": \{
            "FieldRight": \{
                "Mask": "Update",
                "Reason": ""
            \},
            "FieldType": "System.Boolean",
            "FieldLength": 0
            \},
            "IsMandatory": \{
            "FieldRight": \{
                "Mask": "Update",
                "Reason": ""
            \},
            "FieldType": "System.Boolean",
            "FieldLength": 0
            \}
        \}
    \}
    ```

1. Update the relevant fields. Change FieldLabel, ShortLabel to update what text is shown in the client.

    ```json
    \{
        ...,
        "FieldLabel": "My Number Udef",
        "IsMandatory": true,
        "ShortLabel": "NumUdef",
        "Tooltip": "Tooltip for this Number UD field"
        ...,
    \}
    ```

1. Save the user-defined field. **This is a PUT request**.

    The save request accepts the user-defined field to save.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/UserDefinedFieldInfo/SaveUserDefinedFieldInfo
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    Content-Type: application/json; charset=utf-8

    [\{
        "UDefFieldId": 0,
        "ColumnId": 8971,
        "FieldDefault": "",
        "FieldHeight": 17,
        "FieldLabel": "My Number Udef",
        "FieldLeft": 102,
        "FieldTop": 170,
        "FieldType": "Number",
        "FieldWidth": 100,
        "FormatMask": "",
        "HideLabel": false,
        "IsIndexed": false,
        "LabelHeight": 17,
        "LabelLeft": 0,
        "LabelTop": 170,
        "LabelWidth": 100,
        "LastVersionId": 0,
        "ListTableId": 136,
        "IsMandatory": true,
        "Type": "Contact",
        "Page1LineNo": 0,
        "ProgId": "SuperOffice:12",
        "IsReadOnly": false,
        "ShortLabel": "NumUdef",
        "TabOrder": 11,
        "TextLength": 0,
        "Tooltip": "Tooltip for this Number UD field",
        "UdefIdentity": 11,
        "UDListDefinitionId": 0,
        "Justification": "Left",
        "Version": 11,
        "TemplateVariableName": "cl11",
        "HasBeenPublished": false,
        "MdoListName": null
    \}]
    ```

    The response will contain all of the user-defined fields for this entity, but now the new user-defined field UDefFieldId property will contain a identity value.

    The field is not yet viewable in the UI. It needs to first be published.

1. Publish the user-defined field.

    <Warning>
    A Publish request creates a new version of all user-defined fields for the entity. Therefore, all user-defined fields will have updated UdefFieldId values.
    </Warning>

    Before published fields, make sure there is no active publish event happening at the same time. As long as the `IsAnyPublishEventActive` call returns false, it is safe to proceed.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/UserDefinedFieldInfo/IsAnyPublishEventActive
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```

    To prevent anyone from overwriting your field changes, set the publish event flag for the entity.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/UserDefinedFieldInfo/SetPublishStartSystemEvent
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    Content-Type: application/json; charset=utf-8

    \{
        "OwnerType": "Contact"
    \}
    ```

    Publish the user-defined fields to activate the new field changes.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/UserDefinedFieldInfo/Publish
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    Content-Type: application/json; charset=utf-8

    \{
        "OwnerType": "Contact"
    \}
    ```

    Finally issue the RebuildUdefDeltas request to force the field to appear in the UI.

    ```http
    POST https://\{\{env\}\}.superoffice.com/\{\{tenant\}\}/api/v1/Agents/Configuration/RebuildUdefDeltas
    Authorization: Bearer \{\{token\}\}
    Accept: application/json; charset=utf-8
    ```
</Tab>

</Tabs>
